webpackJsonp([1],{"/9Ig":function(t,e){},"3Rpw":function(t,e){},He3c:function(t,e){},JJhT:function(t,e){},QSTe:function(t,e){},aEax:function(t,e){},jG70:function(t,e){},lVK7:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),s=i("zL8q"),a=i.n(s),o=(i("tvR6"),i("pqZz"),i("mvHQ")),c=i.n(o),r=i("//Fk"),l=i.n(r),d=i("mtWM"),_=i.n(d);function u(t,e){return new l.a(function(i,n){_.a.get(t,{params:e}).then(function(t){i(t.data)}).catch(function(t){n(t.data)})})}function m(t,e){return _.a.post(t,c()(e),{headers:{"Content-Type":"application/json"}})}function h(t){for(var e=window.location.search.substr(1).split("&"),i=0;i<e.length;i++){var n=e[i].split("=");if(n[0]===t)return n[1]}return!1}_.a.defaults.baseURL="https://www.production.com",_.a.defaults.timeout=1e4,_.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8";var p={name:"Recommend",data:function(){return{recommend_items:[{url:"",img_src:"",name:"",date:""}]}},mounted:function(){this.init_recommend()},methods:{init_recommend:function(){var t=this;u("http://localhost:8082/recommend",{type:"relative_recommend",video_id:h("video_id")}).then(function(e){t.recommend_items=e.items})}}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"a-col-con",staticStyle:{padding:"20px 20px 0"}},[i("dl",{staticClass:"b-col-con",staticStyle:{margin:"0"}},t._l(t.recommend_items,function(e){return i("dt",[i("a",{staticClass:"a b-row-con a-button",attrs:{href:e.url}},[i("img",{staticStyle:{width:"60%"},attrs:{src:e.img_src}}),t._v(" "),i("div",{staticClass:"b-col-con",staticStyle:{"align-items":"start"}},[i("b",[t._v(t._s(e.name))]),t._v(" "),i("div",[t._v(t._s(e.date))])])])])}),0)])},staticRenderFns:[]};var g=i("VU/8")(p,v,!1,function(t){i("3Rpw")},"data-v-d67d90fe",null).exports,f="http://localhost:8082/login/header",b={name:"Header",data:function(){return{user_avatar:"",header_link:"",header_describe:"",index_link:window.location.path+"/index"}},mounted:function(){var t=this;console.log(f),u(f).then(function(e){t.user_avatar=e.user_avatar,t.header_link=e.header_link,t.header_describe=e.header_describe})}},w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"a-row-con",staticStyle:{padding:"10px 40px"}},[i("div",{staticClass:"b-row-con",staticStyle:{height:"40px",width:"200px"}},[i("a",{staticClass:"a a-button",staticStyle:{"font-size":"24px"},attrs:{href:t.index_link}},[i("b",[t._v("(゜-゜)つロ 干杯")])])]),t._v(" "),i("a",{staticClass:"b-row-con a a-button",staticStyle:{width:"130px"},attrs:{href:t.header_link}},[i("el-image",{staticStyle:{height:"50px",width:"50px","border-radius":"50%"},attrs:{src:t.user_avatar,fit:"contain"}},[i("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[i("i",{staticClass:"el-icon-picture-outline"})])]),t._v(" "),i("h4",[t._v(t._s(t.header_describe))])],1)])},staticRenderFns:[]};var k=i("VU/8")(b,w,!1,function(t){i("JJhT")},null,null).exports,y=i("Lcjf"),C=i.n(y),x=(i("1A0w"),i("9vWd"),{name:"VideoPlayer",mounted:function(){this.initVideo()},methods:{initVideo:function(){new C.a({el:document.querySelector("#videoElement"),url:"http://10.6.11.250:8081/mp4/GameofThronesS1/S01E01.mp4",keyShortcut:"on",playsinline:!0,fluid:!0,volume:.5,videoInit:!0,playbackRate:[.5,1,1.5,2],preloadTime:15})}}}),S={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"videoElement"}})},staticRenderFns:[]};var $={name:"Video",data:function(){return{video_name:"",video_date:"",video_tags:[{name:"",href:""}],video_describe_brief:"",video_describe_more:"",click_word:"angle-down",describe_show:!1}},mounted:function(){this.init_video()},methods:{init_video:function(){var t=this;u("http://localhost:8082/video",{video_id:h("video_id")}).then(function(e){t.video_name=e.video_name,t.video_date=e.video_date,t.video_tags=e.video_tags,t.video_describe_brief=e.video_describe_brief,t.video_describe_more=e.video_describe_more})},describe_fold:function(){"angle-down"===this.click_word?this.click_word="angle-up":this.click_word="angle-down",this.describe_show=!this.describe_show}},components:{VideoPlayer:i("VU/8")(x,S,!1,function(t){i("t8lq")},"data-v-c2917902",null).exports}},R={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"a-col-con",staticStyle:{padding:"30px"}},[i("div",{staticClass:"b-col-con"},[i("h1",[t._v(t._s(t.video_name))]),t._v(" "),i("p",{staticClass:"a-font"},[t._v(t._s(t.video_date))])]),t._v(" "),i("hr",{staticClass:"line"}),t._v(" "),i("div",{staticClass:"b-col-con",attrs:{id:"video_player_box"}},[i("VideoPlayer")],1),t._v(" "),i("hr",{staticClass:"line"}),t._v(" "),i("div",{staticClass:"b-col-con"},[i("dl",{staticClass:"b-row-con"},t._l(t.video_tags,function(e){return i("dt",{staticStyle:{"padding-right":"10px"}},[i("a",{attrs:{href:e.href}},[i("el-tag",{staticClass:"b-button"},[t._v("\n            "+t._s(e.name)+"\n          ")])],1)])}),0),t._v(" "),i("div",{staticClass:"b-col-con"},[i("div",{staticClass:"a-font"},[t._v("\n        "+t._s(t.video_describe_brief)+"\n        "),i("el-collapse-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.describe_show,expression:"describe_show"}],staticClass:"paragraph"},[t._v("\n            "+t._s(t.video_describe_more)+"\n          ")])])],1)])]),t._v(" "),i("div",{staticStyle:{width:"100%","text-align":"center"}},[i("a",{staticClass:"a-font a-button",staticStyle:{"font-size":"27px"},on:{click:function(e){return t.describe_fold()}}},[i("font-awesome-icon",{attrs:{icon:t.click_word}})],1)])])},staticRenderFns:[]};var V=i("VU/8")($,R,!1,function(t){i("jG70")},"data-v-16d37f75",null).exports,I="http://localhost:8082/comment",E=h("video_id"),j={name:"Comment",data:function(){return{my_comment:"",page_current:1,page_total:0,comments:[{id:"",avatar:"",user:"",content:"",time:""}]}},mounted:function(){this.init_comment()},methods:{init_comment:function(){var t=this;u(I+"/getVideoComment",{video_id:E,page:1,page_size:20}).then(function(e){console.log(e),t.page_total=e.page_total,t.comments=e.comments})},onSubmit:function(){var t=this,e={video_id:E,content:this.my_comment};u(I+"/createVideoComment",e).then(function(e){console.log(e),0==e.code?(t.$notify({title:"成功",message:"评论成功",type:"success"}),t.changePage(1)):t.$notify.error({title:"错误",message:"评论失败 "})}).catch(function(){t.$notify.error({title:"错误",message:"评论失败"})})},changePage:function(t){var e=this;u(I+"/getVideoComment",{video_id:E,page:t,page_size:20}).then(function(t){e.page_total=t.page_total,e.comments=t.comments})}}},U={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"a-col-con",staticStyle:{padding:"30px"}},[i("h1",[t._v("评论区")]),t._v(" "),i("hr",{staticClass:"line"}),t._v(" "),i("el-form",{staticClass:"b-row-con"},[i("el-form-item",{staticStyle:{width:"80%"},attrs:{label:""}},[i("el-input",{attrs:{type:"textarea"},model:{value:t.my_comment,callback:function(e){t.my_comment=e},expression:"my_comment"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",plain:""},on:{click:t.onSubmit}},[t._v("评论")])],1)],1),t._v(" "),i("hr",{staticClass:"line"}),t._v(" "),i("dl",{staticClass:"b-col-con",staticStyle:{width:"100%"}},t._l(t.comments,function(e){return i("dt",{staticClass:"b-row-con",staticStyle:{margin:"0 10px 10px 10px"}},[i("div",{staticClass:"b-col-con",staticStyle:{width:"20%"}},[i("el-image",{staticStyle:{height:"50px",width:"50px","border-radius":"50%"},attrs:{src:e.avatar,fit:"contain"}},[i("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[i("i",{staticClass:"el-icon-picture-outline"})])]),t._v(" "),i("p",{staticClass:"a-font"},[t._v(t._s(e.user))])],1),t._v(" "),i("div",{staticClass:"b-col-con",staticStyle:{width:"80%",height:"100px","align-items":"start","justify-content":"space-around"}},[i("div",{staticClass:"a-font"},[t._v(t._s(e.content))]),t._v(" "),i("div",{staticClass:"a-font"},[t._v(t._s(e.time))])])])}),0),t._v(" "),i("hr",{staticClass:"line"}),t._v(" "),i("el-pagination",{attrs:{layout:"prev, pager, next, jumper",total:t.page_total},on:{"current-change":t.changePage}})],1)},staticRenderFns:[]};var F=i("VU/8")(j,U,!1,function(t){i("QSTe")},"data-v-78e0f4e0",null).exports,T={name:"Details",components:{Video:V,Header:k,Recommend:g,Comment:F}},P={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row-body"},[e("div",{staticClass:".a-col-con-no-shadow",staticStyle:{width:"68%"}},[e("Video"),this._v(" "),e("Comment")],1),this._v(" "),e("div",{staticStyle:{width:"28%"}},[e("Recommend")],1)])},staticRenderFns:[]};var L=i("VU/8")(T,P,!1,function(t){i("He3c")},"data-v-82661710",null).exports,q={name:"IndexRecommend",data:function(){return{recommend_items:[{url:"",img_src:"",name:"",date:""}],page_total:200}},mounted:function(){this.init_recommend()},methods:{init_recommend:function(){var t=this;u("http://localhost:8082/recommend",{type:"relative_recommend",video_id:h("video_id")}).then(function(e){t.recommend_items=e.items})}}},z={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"a-col-con"},[n("dl",{staticClass:"b-row-con"},t._l(t.recommend_items,function(e){return n("dt",[n("a",{staticClass:"a b-col-con a-button",attrs:{href:e.url}},[n("img",{staticStyle:{width:"100%"},attrs:{src:i("u/Bu")}}),t._v(" "),n("b",[t._v(t._s(e.name))])])])}),0),t._v(" "),n("el-pagination",{attrs:{layout:"prev, pager, next, jumper",total:t.page_total},on:{"current-change":t.changePage}})],1)},staticRenderFns:[]};var D={name:"Index",components:{Comment:F,IndexRecommend:i("VU/8")(q,z,!1,function(t){i("aEax")},"data-v-53872734",null).exports}},H={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-body"},[e("div",[e("IndexRecommend")],1),this._v(" "),e("div",{staticStyle:{width:"100%","margin-top":"50px"}},[e("Comment")],1)])},staticRenderFns:[]};var J=i("VU/8")(D,H,!1,function(t){i("oIbw")},"data-v-72968494",null).exports;_.a.defaults.withCredentials=!0;var K="http://localhost:8085/identity",A={name:"Login",data:function(){return{active_name:"log_in",login_email:"",login_pwd:"",login_check:"",signup_id:"",signup_pwd:"",signup_pwd_sec:"",signup_check:"",check_img:"",check_id:"",refresh_countdown:"刷新",refresh_disable:!1,refresh_time:-1,login_remember:!1}},mounted:function(){this.check_img_refresh()},methods:{tab_click:function(){this.login_email="",this.login_pwd="",this.login_check="",this.signup_id="",this.signup_pwd="",this.signup_pwd_sec="",this.signup_check=""},login_check_email:function(){return!(this.login_email.length<1)||(this.$message.error("账户ID为空"),!1)},login_check_check:function(){return!(this.login_check.length<1)||(this.$message.error("验证码为空"),!1)},login_check_pwd:function(){return!(this.login_pwd.length<1)||(this.$message.error("账户密码为空"),!1)},login_submit:function(){var t=this;if(this.login_check_email()&&this.login_check_pwd()&&this.login_check_check()){var e={email:this.login_email,password:this.login_pwd,uncheckedKey:this.login_check,remember:this.login_remember};m(K+"/login",e).then(function(e){t.$notify({title:"登录成功",message:e.data.msg,type:"success"}),window.location.href=e.data.data}).catch(function(e){400===e.response.status?t.$notify.error({title:"登录失败",message:e.response.data.msg}):t.$notify.error({title:"登录失败",message:"未知错误，请联系管理员"})})}},login_cancel:function(){u("http://localhost:8085/identity/checkLoginStatus",{service:"http://localhost:8080/index.html"})},signup_check_id:function(){return!(this.signup_id.length<1)||(this.$message.error("账户ID为空"),!1)},signup_check_pwd:function(){return!(this.signup_pwd.length<1)||(this.$message.error("密码为空"),!1)},signup_check_pwd_sec:function(){return this.signup_pwd_sec.length<1?(this.$message.error("密码为空"),!1):this.signup_pwd===this.signup_pwd_sec||(this.$message.error("两次密码不一致"),!1)},check_img_refresh:function(){var t=this;if(this.refresh_time+=1,_.a.get(K+"/getCheckImg",{responseType:"blob"}).then(function(e){t.check_img=URL.createObjectURL(e.data)}).catch(function(e){t.$notify.error({title:"验证码加载失败",message:"验证码加载失败，请联系管理员"})}),console.log(this.refresh_time),this.refresh_time>4)var e=20,i=window.setInterval(function(){t.refresh_disable=!0,t.refresh_countdown=e+"s后重试",(e-=1)<0&&(window.clearInterval(i),t.refresh_countdown="刷新",t.refresh_disable=!1,t.refresh_time=0)},1e3)},signup_check_check:function(){return!(this.signup_check.length<1)||(this.$message.error("验证码为空"),!1)},signup_submit:function(){var t=this;if(this.signup_check_id()&&this.signup_check_pwd()&&this.signup_check_pwd_sec()&&this.signup_check_check()){var e={email:this.login_email,password:this.login_pwd,uncheckedKey:this.signup_check};m(K+"/register",e).then(function(e){t.$notify({title:"注册成功",message:e.data.msg,type:"success"}),window.location.href=e.data.data}).catch(function(e){400===e.response.status?t.$notify.error({title:"注册失败",message:e.response.data.msg}):t.$notify.error({title:"注册失败",message:"未知错误，请联系管理员"})})}},signup_cancel:function(){this.active_name="log_in"}}},Q={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-body"},[i("div",{staticClass:"a-col-con"},[i("el-tabs",{attrs:{"tab-position":"left"},on:{"tab-click":t.tab_click},model:{value:t.active_name,callback:function(e){t.active_name=e},expression:"active_name"}},[i("el-tab-pane",{attrs:{name:"log_in"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("h2",[t._v("登录")])]),t._v(" "),i("form",[i("div",{staticClass:"b-row-con form_item"},[i("span",{staticClass:"title"},[t._v("ID")]),t._v(" "),i("el-input",{attrs:{clearable:"",placeholder:"请输入email"},on:{blur:t.login_check_email},model:{value:t.login_email,callback:function(e){t.login_email=e},expression:"login_email"}})],1),t._v(" "),i("div",{staticClass:"b-row-con form_item"},[i("span",{staticClass:"title"},[t._v("密码")]),t._v(" "),i("el-input",{attrs:{clearable:"","show-password":"",placeholder:"请输入密码"},on:{blur:t.login_check_pwd},model:{value:t.login_pwd,callback:function(e){t.login_pwd=e},expression:"login_pwd"}})],1),t._v(" "),i("div",{staticClass:"b-row-con",staticStyle:{"justify-content":"center"}},[i("img",{staticStyle:{width:"150px",height:"50px","margin-right":"20px"},attrs:{src:t.check_img}}),t._v(" "),i("el-button",{attrs:{disabled:t.refresh_disable},on:{click:t.check_img_refresh}},[t._v(t._s(t.refresh_countdown))])],1),t._v(" "),i("div",{staticClass:"b-row-con form_item"},[i("span",{staticClass:"title"},[t._v("验证码")]),t._v(" "),i("el-input",{attrs:{clearable:"",placeholder:"请输入验证码"},on:{blur:t.login_check_check},model:{value:t.login_check,callback:function(e){t.login_check=e},expression:"login_check"}})],1),t._v(" "),i("div",{staticClass:"b-row-con form_item",staticStyle:{"margin-top":"20px","justify-content":"center"}},[i("el-checkbox",{model:{value:t.login_remember,callback:function(e){t.login_remember=e},expression:"login_remember"}},[t._v("七天内免登陆")])],1),t._v(" "),i("div",{staticClass:"b-row-con form_item",staticStyle:{"margin-top":"20px","justify-content":"space-around"}},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:t.login_submit}},[t._v("登录")]),t._v(" "),i("el-button",{on:{click:t.login_cancel}},[t._v("取消")])],1)])]),t._v(" "),i("el-tab-pane",{attrs:{name:"sign_up"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("h2",{},[t._v("注册")])]),t._v(" "),i("form",[i("div",{staticClass:"b-row-con form_item"},[i("span",{staticClass:"title"},[t._v("新ID")]),t._v(" "),i("el-input",{attrs:{clearable:"",placeholder:"请输入新账户ID"},on:{blur:t.signup_check_id},model:{value:t.signup_id,callback:function(e){t.signup_id=e},expression:"signup_id"}})],1),t._v(" "),i("div",{staticClass:"b-row-con form_item"},[i("span",{staticClass:"title"},[t._v("新密码")]),t._v(" "),i("el-input",{attrs:{clearable:"","show-password":"",placeholder:"请输入密码"},on:{blur:t.signup_check_pwd},model:{value:t.signup_pwd,callback:function(e){t.signup_pwd=e},expression:"signup_pwd"}})],1),t._v(" "),i("div",{staticClass:"b-row-con form_item"},[i("span",{staticClass:"title"},[t._v("重复密码")]),t._v(" "),i("el-input",{attrs:{clearable:"","show-password":"",placeholder:"请第二次输入密码"},on:{blur:t.signup_check_pwd_sec},model:{value:t.signup_pwd_sec,callback:function(e){t.signup_pwd_sec=e},expression:"signup_pwd_sec"}})],1),t._v(" "),i("div",{staticClass:"b-row-con",staticStyle:{"justify-content":"center"}},[i("img",{staticStyle:{width:"150px",height:"50px","margin-right":"20px"},attrs:{src:t.check_img}}),t._v(" "),i("el-button",{attrs:{disabled:t.refresh_disable},on:{click:t.check_img_refresh}},[t._v(t._s(t.refresh_countdown))])],1),t._v(" "),i("div",{staticClass:"b-row-con form_item"},[i("span",{staticClass:"title"},[t._v("验证码")]),t._v(" "),i("el-input",{attrs:{clearable:"",placeholder:"请输入验证码"},on:{blur:t.signup_check_check},model:{value:t.signup_check,callback:function(e){t.signup_check=e},expression:"signup_check"}})],1),t._v(" "),i("div",{staticClass:"b-row-con form_item",staticStyle:{"margin-top":"20px","justify-content":"space-around"}},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:t.signup_submit}},[t._v("注册")]),t._v(" "),i("el-button",{on:{click:t.signup_cancel}},[t._v("取消")])],1)])])],1)],1)])},staticRenderFns:[]};var G={name:"App",components:{Header:k,Details:L,Index:J,Login:i("VU/8")(A,Q,!1,function(t){i("/9Ig")},"data-v-cb535d52",null).exports}},W={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",[e("Header")],1),this._v(" "),e("Login")],1)},staticRenderFns:[]},B=i("VU/8")(G,W,!1,null,null,null).exports,M=i("/ocq"),O=i("QxPg"),Z=i("1e6/"),N=i("1P+R"),X=i("KREn"),Y=i("h17U");O.a.library.add(N.a),O.a.library.add(X.a),O.a.library.add(Y.a),n.default.component("font-awesome-icon",Z.a),n.default.config.productionTip=!1,n.default.use(a.a),n.default.use(M.a),new n.default({el:"#app",components:{App:B},template:"<App/>"})},oIbw:function(t,e){},pqZz:function(t,e){},t8lq:function(t,e){},tvR6:function(t,e){},"u/Bu":function(t,e,i){t.exports=i.p+"static/img/toby2.e6dfc88.jpeg"}},["lVK7"]);
//# sourceMappingURL=index.b2ce0d4958445e4e114c.js.map